/*! trace-api 0.2.0 | MIT (c) 2017 cpsdqs | https://github.com/cpsdqs/trace-api */
!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";r(1);var n=r(2);try{var a=r(27);a&&Object.assign(n,a)}catch(t){}t.exports=n,"undefined"!=typeof window&&(window.Trace=n)},function(t,e){"use strict";"undefined"!=typeof window&&"function"!=typeof window.CanvasRenderingContext2D.prototype.resetTransform&&(window.CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)})},function(t,e,r){"use strict";t.exports={AnimatedBoolean:r(3),AnimatedColor:r(6),AnimatedNumber:r(17),AnimatedString:r(18),AnimatedValue:r(4),Easing:r(15),Object:r(19),Timeline:r(25),Transform:r(23),Utils:r(24),Viewport:r(26)}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=r(4);t.exports=function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(i)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(5),l=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.defaultValue=t,r.keys=new Map,r.interpolator=e.interpolator,r.interpolatorSettings={},r.lastValue=null,r}return o(e,t),i(e,[{key:"getValue",value:function(t,r){var n=e.applyInterpolator(this,t,r);return this.valuesAreEqual(n,this.lastValue)&&(this.lastValue=n,this.emit("change",n)),n}},{key:"valuesAreEqual",value:function(t,e){return t===e}},{key:"addKey",value:function(t,e,r,n){this.keys.set(t,[e,{function:r,parameters:n}])}},{key:"removeKey",value:function(t){this.keys.delete(t)}}],[{key:"interpolator",value:function(t){var r=t.currentTime,n=t.keys,a=t.defaultValue,o=(t.deltaTime,t.settings,-(1/0)),i=1/0,u=!0,l=!1,s=void 0;try{for(var c,h=n.keys()[Symbol.iterator]();!(u=(c=h.next()).done);u=!0){var f=c.value;f<=r&&f>o&&(o=f),f>r&&f<i&&(i=f)}}catch(t){l=!0,s=t}finally{try{!u&&h.return&&h.return()}finally{if(l)throw s}}return Number.isFinite(o)||Number.isFinite(i)?Number.isFinite(o)?e.resolveKey(n,o,a)[0]:e.resolveKey(n,i,a)[0]:a}},{key:"resolveKey",value:function(t,r,n){if(t.get(r)&&t.get(r)[0]===e.PREV_KEY){var a=-(1/0),o=void 0,i=!0,u=!1,l=void 0;try{for(var s,c=t.keys()[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var h=s.value;h<r&&h>a&&(a=h,o=t.get(h))}}catch(t){u=!0,l=t}finally{try{!i&&c.return&&c.return()}finally{if(u)throw l}}return o?o:[n,{function:void 0,parameters:void 0}]}return t.get(r)}},{key:"applyInterpolator",value:function(t,e,r){return t.interpolator({currentTime:e,keys:t.keys,defaultValue:t.defaultValue,deltaTime:r,settings:t.interpolatorSettings})}}]),e}(u);l.PREV_KEY=Symbol("Previous Key"),t.exports=l},function(t,e){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return"object"===("undefined"==typeof t?"undefined":u(t))&&null!==t}function i(t){return void 0===t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,a,u,l,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],i(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(o(r))for(u=Array.prototype.slice.call(arguments,1),s=r.slice(),a=s.length,l=0;l<a;l++)s[l].apply(this,u);return!0},r.prototype.addListener=function(t,e){var a;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(a=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),a||(a=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var a=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,a,i,u;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],i=r.length,a=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(u=i;u-- >0;)if(r[u]===e||r[u].listener&&r[u].listener===e){a=u;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(7),s=r(4),c=r(15),h=l(),f=[];for(var M in l)M&&f.push(M);t.exports=function(t){function e(t){a(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.interpolator=e.interpolator,r}return i(e,t),u(e,null,[{key:"interpolator",value:function(t){var e=t.currentTime,r=t.keys,a=t.defaultValue,o=(t.deltaTime,t.settings),i=-(1/0),u=1/0,M=!0,v=!1,p=void 0;try{for(var d,m=r.keys()[Symbol.iterator]();!(M=(d=m.next()).done);M=!0){var b=d.value;b<=e&&b>i&&(i=b),b>e&&b<u&&(u=b)}}catch(t){v=!0,p=t}finally{try{!M&&m.return&&m.return()}finally{if(v)throw p}}var y=s.resolveKey(r,i,a),x=s.resolveKey(r,u,a),S=h,g=h;try{S=l(y[0])}catch(t){}try{g=l(x[0])}catch(t){}if(!Number.isFinite(i)&&!Number.isFinite(u))return a;if(!Number.isFinite(i))return g.rgb().string();if(!Number.isFinite(u))return S.rgb().string();var w="rgb";f.includes(o.model)&&(w=o.model);var I=S[w]().array(),D=g[w]().array(),F=(e-i)/(u-i),O=(x[1].function||c.linear).apply(void 0,[F].concat(n(x[1].parameters||[]))),k=g.alpha()<S.alpha()?g[w]().array():S[w]().array();for(var _ in k){var E=I[_]||1,A=D[_]||1;k[_]=(A-E)*O+E}if("array"===o.type)return l(k,w).rgb().array();if("number"===o.type){var P=l(k,w).rgb().array().reverse(),z=256,T=0,L=!0,j=!1,N=void 0;try{for(var R,q=P[Symbol.iterator]();!(L=(R=q.next()).done);L=!0){var Y=R.value;T+=Y*z,z=Math.pow(z,2)}}catch(t){j=!0,N=t}finally{try{!L&&q.return&&q.return()}finally{if(j)throw N}}return T}return l(k,w).rgb().string()}}]),e}(s)},function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);if(e&&e in M&&(e=null),e&&!(e in h))throw new Error("Unknown model: "+e);var r,a;if(t)if(t instanceof n)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var o=c.get(t);if(null===o)throw new Error("Unable to parse color from string: "+t);this.model=o.model,a=h[this.model].channels,this.color=o.value.slice(0,a),this.valpha="number"==typeof o.value[a]?o.value[a]:1}else if(t.length){this.model=e||"rgb",a=h[this.model].channels;var i=f.call(t,0,a);this.color=s(i,a),this.valpha="number"==typeof t[a]?t[a]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var u=Object.keys(t);"alpha"in t&&(u.splice(u.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var l=u.sort().join("");if(!(l in v))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=v[l];var d=h[this.model].labels,m=[];for(r=0;r<d.length;r++)m.push(t[d[r]]);this.color=s(m)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(p[this.model])for(a=h[this.model].channels,r=0;r<a;r++){var b=p[this.model][r];b&&(this.color[r]=b(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function a(t,e){return Number(t.toFixed(e))}function o(t){return function(e){return a(e,t)}}function i(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(t){(p[t]||(p[t]=[]))[e]=r}),t=t[0],function(n){var a;return arguments.length?(r&&(n=r(n)),a=this[t](),a.color[e]=n,a):(a=this[t]().color[e],r&&(a=r(a)),a)}}function u(t){return function(e){return Math.max(0,Math.min(t,e))}}function l(t){return Array.isArray(t)?t:[t]}function s(t,e){for(var r=0;r<e;r++)"number"!=typeof t[r]&&(t[r]=0);return t}var c=r(8),h=r(12),f=[].slice,M=["keyword","gray","hex"],v={};Object.keys(h).forEach(function(t){v[f.call(h[t].labels).sort().join("")]=t});var p={};n.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in c.to?this:this.rgb();e=e.round("number"==typeof t?t:1);var r=1===e.valpha?e.color:e.color.concat(this.valpha);return c.to[e.model](r)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),r=1===e.valpha?e.color:e.color.concat(this.valpha);return c.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=h[this.model].channels,r=h[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new n(this.color.map(o(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new n(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:i("rgb",0,u(255)),green:i("rgb",1,u(255)),blue:i("rgb",2,u(255)),hue:i(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:i("hsl",1,u(100)),lightness:i("hsl",2,u(100)),saturationv:i("hsv",1,u(100)),value:i("hsv",2,u(100)),chroma:i("hcg",1,u(100)),gray:i("hcg",2,u(100)),white:i("hwb",1,u(100)),wblack:i("hwb",2,u(100)),cyan:i("cmyk",0,u(100)),magenta:i("cmyk",1,u(100)),yellow:i("cmyk",2,u(100)),black:i("cmyk",3,u(100)),x:i("xyz",0,u(100)),y:i("xyz",1,u(100)),z:i("xyz",2,u(100)),l:i("lab",0,u(100)),a:i("lab",1),b:i("lab",2),keyword:function(t){return arguments.length?new n(t):h[this.model].keyword(this.color)},hex:function(t){return arguments.length?new n(t):c.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.rgb().color,e=(299*t[0]+587*t[1]+114*t[2])/1e3;return e<128},light:function(){return!this.dark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return n.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){var r=this.rgb(),a=t.rgb(),o=void 0===e?.5:e,i=2*o-1,u=r.alpha()-a.alpha(),l=((i*u===-1?i:(i+u)/(1+i*u))+1)/2,s=1-l;return n.rgb(l*r.red()+s*a.red(),l*r.green()+s*a.green(),l*r.blue()+s*a.blue(),r.alpha()*o+a.alpha()*(1-o))}},Object.keys(h).forEach(function(t){if(M.indexOf(t)===-1){var e=h[t].channels;n.prototype[t]=function(){if(this.model===t)return new n(this);if(arguments.length)return new n(arguments,t);var r="number"==typeof arguments[e]?e:this.valpha;return new n(l(h[this.model][t].raw(this.color)).concat(r),t)},n[t]=function(r){return"number"==typeof r&&(r=s(f.call(arguments),e)),new n(r,t)}}}),t.exports=n},function(t,e,r){"use strict";function n(t,e,r){return Math.min(Math.max(e,t),r)}function a(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var o=r(9),i=r(10),u={};for(var l in o)o.hasOwnProperty(l)&&(u[o[l]]=l);var s=t.exports={to:{}};s.get=function(t){var e,r,n=t.substring(0,3).toLowerCase();switch(n){case"hsl":e=s.get.hsl(t),r="hsl";break;case"hwb":e=s.get.hwb(t),r="hwb";break;default:e=s.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,r,a=/^#([a-fA-F0-9]{3})$/,i=/^#([a-fA-F0-9]{6})$/,u=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,l=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,s=/(\D+)/,c=[0,0,0,1];if(e=t.match(a))for(e=e[1],r=0;r<3;r++)c[r]=parseInt(e[r]+e[r],16);else if(e=t.match(i))for(e=e[1],r=0;r<3;r++){var h=2*r;c[r]=parseInt(e.slice(h,h+2),16)}else if(e=t.match(u)){for(r=0;r<3;r++)c[r]=parseInt(e[r+1],0);e[4]&&(c[3]=parseFloat(e[4]))}else if(e=t.match(l)){for(r=0;r<3;r++)c[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(c[3]=parseFloat(e[4]))}else if(e=t.match(s))return"transparent"===e[1]?[0,0,0,0]:(c=o[e[1]])?(c[3]=1,c):null;for(r=0;r<c.length;r++)c[r]=n(c[r],0,255);return c[3]=n(c[3],0,1),c},s.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=t.match(e);if(r){var a=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=n(parseFloat(r[2]),0,100),u=n(parseFloat(r[3]),0,100),l=n(isNaN(a)?1:a,0,1);return[o,i,u,l]}return null},s.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=t.match(e);if(r){var a=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=n(parseFloat(r[2]),0,100),u=n(parseFloat(r[3]),0,100),l=n(isNaN(a)?1:a,0,1);return[o,i,u,l]}return null},s.to.hex=function(t){return"#"+a(t[0])+a(t[1])+a(t[2])},s.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},s.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return u[t.slice(0,3)]}},function(t,e){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){"use strict";var n=r(11),a=Array.prototype.concat,o=Array.prototype.slice,i=t.exports=function(t){for(var e=[],r=0,i=t.length;r<i;r++){var u=t[r];n(u)?e=a.call(e,o.call(u)):e.push(u)}return e};i.wrap=function(t){return function(){return t(i(arguments))}}},function(t,e){"use strict";t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,r){"use strict";function n(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function a(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"===("undefined"==typeof r?"undefined":o(r)))for(var n=r.length,a=0;a<n;a++)r[a]=Math.round(r[a]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(13),u=r(14),l={},s=Object.keys(i);s.forEach(function(t){l[t]={},Object.defineProperty(l[t],"channels",{value:i[t].channels}),Object.defineProperty(l[t],"labels",{value:i[t].labels});var e=u(t),r=Object.keys(e);r.forEach(function(r){var o=e[r];l[t][r]=a(o),l[t][r].raw=n(o)})}),t.exports=l},function(t,e,r){"use strict";function n(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}var a=r(9),o={};for(var i in a)a.hasOwnProperty(i)&&(o[a[i]]=i);var u=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var l in u)if(u.hasOwnProperty(l)){if(!("channels"in u[l]))throw new Error("missing channels property: "+l);if(!("labels"in u[l]))throw new Error("missing channel labels property: "+l);if(u[l].labels.length!==u[l].channels)throw new Error("channel and label counts mismatch: "+l);var s=u[l].channels,c=u[l].labels;delete u[l].channels,delete u[l].labels,Object.defineProperty(u[l],"channels",{value:s}),Object.defineProperty(u[l],"labels",{value:c})}u.rgb.hsl=function(t){var e,r,n,a=t[0]/255,o=t[1]/255,i=t[2]/255,u=Math.min(a,o,i),l=Math.max(a,o,i),s=l-u;return l===u?e=0:a===l?e=(o-i)/s:o===l?e=2+(i-a)/s:i===l&&(e=4+(a-o)/s),e=Math.min(60*e,360),e<0&&(e+=360),n=(u+l)/2,r=l===u?0:n<=.5?s/(l+u):s/(2-l-u),[e,100*r,100*n]},u.rgb.hsv=function(t){var e,r,n,a=t[0],o=t[1],i=t[2],u=Math.min(a,o,i),l=Math.max(a,o,i),s=l-u;return r=0===l?0:s/l*1e3/10,l===u?e=0:a===l?e=(o-i)/s:o===l?e=2+(i-a)/s:i===l&&(e=4+(a-o)/s),e=Math.min(60*e,360),e<0&&(e+=360),n=l/255*1e3/10,[e,r,n]},u.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],a=u.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[a,100*o,100*n]},u.rgb.cmyk=function(t){var e,r,n,a,o=t[0]/255,i=t[1]/255,u=t[2]/255;return a=Math.min(1-o,1-i,1-u),e=(1-o-a)/(1-a)||0,r=(1-i-a)/(1-a)||0,n=(1-u-a)/(1-a)||0,[100*e,100*r,100*n,100*a]},u.rgb.keyword=function(t){var e=o[t];if(e)return e;var r,i=1/0;for(var u in a)if(a.hasOwnProperty(u)){var l=a[u],s=n(t,l);s<i&&(i=s,r=u)}return r},u.keyword.rgb=function(t){return a[t]},u.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var a=.4124*e+.3576*r+.1805*n,o=.2126*e+.7152*r+.0722*n,i=.0193*e+.1192*r+.9505*n;return[100*a,100*o,100*i]},u.rgb.lab=function(t){var e,r,n,a=u.rgb.xyz(t),o=a[0],i=a[1],l=a[2];return o/=95.047,i/=100,l/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,e=116*i-16,r=500*(o-i),n=200*(i-l),[e,r,n]},u.hsl.rgb=function(t){var e,r,n,a,o,i=t[0]/360,u=t[1]/100,l=t[2]/100;if(0===u)return o=255*l,[o,o,o];r=l<.5?l*(1+u):l+u-l*u,e=2*l-r,a=[0,0,0];for(var s=0;s<3;s++)n=i+1/3*-(s-1),n<0&&n++,n>1&&n--,o=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,a[s]=255*o;return a},u.hsl.hsv=function(t){var e,r,n=t[0],a=t[1]/100,o=t[2]/100,i=a,u=Math.max(o,.01);return o*=2,a*=o<=1?o:2-o,i*=u<=1?u:2-u,r=(o+a)/2,e=0===o?2*i/(u+i):2*a/(o+a),[n,100*e,100*r]},u.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,a=Math.floor(e)%6,o=e-Math.floor(e),i=255*n*(1-r),u=255*n*(1-r*o),l=255*n*(1-r*(1-o));switch(n*=255,a){case 0:return[n,l,i];case 1:return[u,n,i];case 2:return[i,n,l];case 3:return[i,u,n];case 4:return[l,i,n];case 5:return[n,i,u]}},u.hsv.hsl=function(t){var e,r,n,a=t[0],o=t[1]/100,i=t[2]/100,u=Math.max(i,.01);return n=(2-o)*i,e=(2-o)*u,r=o*u,r/=e<=1?e:2-e,r=r||0,n/=2,[a,100*r,100*n]},u.hwb.rgb=function(t){var e,r,n,a,o=t[0]/360,i=t[1]/100,u=t[2]/100,l=i+u;l>1&&(i/=l,u/=l),e=Math.floor(6*o),r=1-u,n=6*o-e,0!==(1&e)&&(n=1-n),a=i+n*(r-i);var s,c,h;switch(e){default:case 6:case 0:s=r,c=a,h=i;break;case 1:s=a,c=r,h=i;break;case 2:s=i,c=r,h=a;break;case 3:s=i,c=a,h=r;break;case 4:s=a,c=i,h=r;break;case 5:s=r,c=i,h=a}return[255*s,255*c,255*h]},u.cmyk.rgb=function(t){var e,r,n,a=t[0]/100,o=t[1]/100,i=t[2]/100,u=t[3]/100;return e=1-Math.min(1,a*(1-u)+u),r=1-Math.min(1,o*(1-u)+u),n=1-Math.min(1,i*(1-u)+u),[255*e,255*r,255*n]},u.xyz.rgb=function(t){var e,r,n,a=t[0]/100,o=t[1]/100,i=t[2]/100;return e=3.2406*a+o*-1.5372+i*-.4986,r=a*-.9689+1.8758*o+.0415*i,n=.0557*a+o*-.204+1.057*i,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,e=Math.min(Math.max(0,e),1),r=Math.min(Math.max(0,r),1),n=Math.min(Math.max(0,n),1),[255*e,255*r,255*n]},u.xyz.lab=function(t){var e,r,n,a=t[0],o=t[1],i=t[2];return a/=95.047,o/=100,i/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,e=116*o-16,r=500*(a-o),n=200*(o-i),[e,r,n]},u.lab.xyz=function(t){var e,r,n,a=t[0],o=t[1],i=t[2];r=(a+16)/116,e=o/500+r,n=r-i/200;var u=Math.pow(r,3),l=Math.pow(e,3),s=Math.pow(n,3);return r=u>.008856?u:(r-16/116)/7.787,e=l>.008856?l:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,e*=95.047,r*=100,n*=108.883,[e,r,n]},u.lab.lch=function(t){var e,r,n,a=t[0],o=t[1],i=t[2];return e=Math.atan2(i,o),r=360*e/2/Math.PI,r<0&&(r+=360),n=Math.sqrt(o*o+i*i),[a,n,r]},u.lch.lab=function(t){var e,r,n,a=t[0],o=t[1],i=t[2];return n=i/360*2*Math.PI,e=o*Math.cos(n),r=o*Math.sin(n),[a,e,r]},u.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],a=1 in arguments?arguments[1]:u.rgb.hsv(t)[2];if(a=Math.round(a/50),0===a)return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===a&&(o+=60),o},u.hsv.ansi16=function(t){return u.rgb.ansi16(u.hsv.rgb(t),t[2])},u.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var a=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return a},u.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=.5*(~~(t>50)+1),n=(1&e)*r*255,a=(e>>1&1)*r*255,o=(e>>2&1)*r*255;return[n,a,o]},u.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,a=Math.floor((r=t%36)/6)/5*255,o=r%6/5*255;return[n,a,o]},u.rgb.hex=function(t){var e=((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2])),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r},u.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map(function(t){return t+t}).join(""));var n=parseInt(r,16),a=n>>16&255,o=n>>8&255,i=255&n;return[a,o,i]},u.rgb.hcg=function(t){var e,r,n=t[0]/255,a=t[1]/255,o=t[2]/255,i=Math.max(Math.max(n,a),o),u=Math.min(Math.min(n,a),o),l=i-u;return e=l<1?u/(1-l):0,r=l<=0?0:i===n?(a-o)/l%6:i===a?2+(o-n)/l:4+(n-a)/l+4,r/=6,r%=1,[360*r,100*l,100*e]},u.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,a=0;return n=r<.5?2*e*r:2*e*(1-r),n<1&&(a=(r-.5*n)/(1-n)),[t[0],100*n,100*a]},u.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,a=0;return n<1&&(a=(r-n)/(1-n)),[t[0],100*n,100*a]},u.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var a=[0,0,0],o=e%1*6,i=o%1,u=1-i,l=0;switch(Math.floor(o)){case 0:a[0]=1,a[1]=i,a[2]=0;break;case 1:a[0]=u,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=i;break;case 3:a[0]=0,a[1]=u,a[2]=1;break;case 4:a[0]=i,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=u}return l=(1-r)*n,[255*(r*a[0]+l),255*(r*a[1]+l),255*(r*a[2]+l)]},u.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),a=0;return n>0&&(a=e/n),[t[0],100*a,100*n]},u.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,a=0;return n>0&&n<.5?a=e/(2*n):n>=.5&&n<1&&(a=e/(2*(1-n))),[t[0],100*a,100*n]},u.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);
return[t[0],100*(n-e),100*(1-n)]},u.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,a=n-e,o=0;return a<1&&(o=(n-a)/(1-a)),[t[0],100*a,100*o]},u.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},u.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},u.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},u.gray.hsl=u.gray.hsv=function(t){return[0,0,t[0]]},u.gray.hwb=function(t){return[0,100,t[0]]},u.gray.cmyk=function(t){return[0,0,0,t[0]]},u.gray.lab=function(t){return[t[0],0,0]},u.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n},u.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}},function(t,e,r){"use strict";function n(){for(var t={},e=l.length,r=0;r<e;r++)t[l[r]]={distance:-1,parent:null};return t}function a(t){var e=n(),r=[t];for(e[t].distance=0;r.length;)for(var a=r.pop(),o=Object.keys(u[a]),i=o.length,l=0;l<i;l++){var s=o[l],c=e[s];c.distance===-1&&(c.distance=e[a].distance+1,c.parent=a,r.unshift(s))}return e}function o(t,e){return function(r){return e(t(r))}}function i(t,e){for(var r=[e[t].parent,t],n=u[e[t].parent][t],a=e[t].parent;e[a].parent;)r.unshift(e[a].parent),n=o(u[e[a].parent][a],n),a=e[a].parent;return n.conversion=r,n}var u=r(13),l=Object.keys(u);t.exports=function(t){for(var e=a(t),r={},n=Object.keys(e),o=n.length,u=0;u<o;u++){var l=n[u],s=e[l];null!==s.parent&&(r[l]=i(l,e))}return r}},function(t,e,r){"use strict";var n=r(16),a=new Map,o=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=e.reduce(function(t,e){return t+":"+e},"");return a.has(o)||a.set(o,n.apply(void 0,e)),a.get(o)};t.exports={linear:function(t){return t},easeInSine:function(t){return Math.sin((Math.PI*t-Math.PI)/2)+1},easeOutSine:function(t){return Math.sin(Math.PI*t/2)},easeInOutSine:function(t){return Math.sin(Math.PI*t-Math.PI/2)/2+.5},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeInExpo:function(t){return Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return t<.5?Math.pow(2,10*(2*t-1))/2:1-Math.pow(2,-10*(2*t-1))/2},easeInCirc:function(t){return-Math.sqrt(1-t*t)+1},easeOutCirc:function(t){return Math.sqrt(1- --t*t)},easeInOutCirc:function(t){return t<.5?-.5*(Math.sqrt(1-4*t*t)-1):.5*(Math.sqrt(1-(2*t-2)*(2*t-2))+1)},easeInBack:function(t){return o(.6,-.28,.735,.045)(t)},easeOutBack:function(t){return o(.175,.885,.32,1.275)(t)},easeInOutBack:function(t){return o(.68,-.55,.265,1.55)(t)},step:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(e?Math.ceil:Math.floor)(t*r)/r},cubicBezier:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return o(e,r,n,a)(t)}}},function(t,e){"use strict";function r(t,e){return 1-3*e+3*t}function n(t,e){return 3*e-6*t}function a(t){return 3*t}function o(t,e,o){return((r(e,o)*t+n(e,o))*t+a(e))*t}function i(t,e,o){return 3*r(e,o)*t*t+2*n(e,o)*t+a(e)}function u(t,e,r,n,a){var i,u,l=0;do u=e+(r-e)/2,i=o(u,n,a)-t,i>0?r=u:e=u;while(Math.abs(i)>h&&++l<f);return u}function l(t,e,r,n){for(var a=0;a<s;++a){var u=i(e,r,n);if(0===u)return e;var l=o(e,r,n)-t;e-=l/u}return e}var s=4,c=.001,h=1e-7,f=10,M=11,v=1/(M-1),p="function"==typeof Float32Array;t.exports=function(t,e,r,n){function a(e){for(var n=0,a=1,o=M-1;a!==o&&s[a]<=e;++a)n+=v;--a;var h=(e-s[a])/(s[a+1]-s[a]),f=n+h*v,p=i(f,t,r);return p>=c?l(e,f,t,r):0===p?f:u(e,n,n+v,t,r)}if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");var s=p?new Float32Array(M):new Array(M);if(t!==e||r!==n)for(var h=0;h<M;++h)s[h]=o(h*v,t,r);return function(i){return t===e&&r===n?i:0===i?0:1===i?1:o(a(i),e,n)}}},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(4),s=r(15);t.exports=function(t){function e(t){a(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.interpolator=e.interpolator,r}return i(e,t),u(e,null,[{key:"interpolator",value:function(t){var e=t.currentTime,r=t.keys,a=t.defaultValue,o=-(1/0),i=1/0,u=!0,c=!1,h=void 0;try{for(var f,M=r.keys()[Symbol.iterator]();!(u=(f=M.next()).done);u=!0){var v=f.value;v<=e&&v>o&&(o=v),v>e&&v<i&&(i=v)}}catch(t){c=!0,h=t}finally{try{!u&&M.return&&M.return()}finally{if(c)throw h}}if(!Number.isFinite(o)&&!Number.isFinite(i))return a;if(!Number.isFinite(o))return r.get(i)[0];if(!Number.isFinite(i))return r.get(o)[0];var p=l.resolveKey(r,o,a),d=l.resolveKey(r,i,a),m=(e-o)/(i-o),b=(d[1].function||s.linear).apply(void 0,[m].concat(n(d[1].parameters||[])));return(d[0]-p[0])*b+p[0]}},{key:"springInterpolator",value:function(t){var r=t.currentTime,n=t.keys,a=t.defaultValue,o=t.deltaTime,i=t.settings,u=e.interpolator({currentTime:r,keys:n,defaultValue:a,deltaTime:o,settings:i});if(!i.hasOwnProperty("springPosition")){var s=-(1/0),c=1/0,h=!0,f=!1,M=void 0;try{for(var v,p=n.keys()[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var d=v.value;d<=r&&d>s&&(s=d),d>r&&d<c&&(c=d)}}catch(t){f=!0,M=t}finally{try{!h&&p.return&&p.return()}finally{if(f)throw M}}Number.isFinite(s)?i.springPosition=l.resolveKey(n,s,a)[0]:Number.isFinite(c)?i.springPosition=l.resolveKey(n,c,a)[0]:i.springPosition=a,i.springVelocity=0}var m=i.springPosition,b=i.springVelocity,y=0|i.spring[0],x=0|i.spring[1];return b=(b+y*o*(u-m))*(1/(1+x*o)),m+=b*o,i.springPosition=m,i.springVelocity=b,m}}]),e}(l)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=r(4);t.exports=function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(i)},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(5),h=r(20),f=r(21),M=r(23),v=r(17),p=r(3),d=r(24);t.exports=function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.parentNode=null,t.transform=new M,t.opacity=new v(1),t.enabled=new p(!0),t.zIndex=new v(0),t.children=new Set,t.on("connected",function(){var e=!0,r=!1,n=void 0;try{for(var a,o=t.children.values()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;i.emit("connected")}}catch(t){r=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}}),t.on("disconnected",function(){var e=!0,r=!1,n=void 0;try{for(var a,o=t.children.values()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;i.emit("disconnected")}}catch(t){r=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}}),t}return u(e,t),s(e,[{key:"sortChildren",value:function(t,e){var r=new Map,n=!0,o=!1,i=void 0;try{for(var u,l=this.children.values()[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var s=u.value;r.set(s,[s.zIndex.getValue(t,e),s.enabled.getValue(t,e)])}}catch(t){o=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}var c=h([].concat(a(r.keys())),function(t,e){return r.get(t)[0]>r.get(e)[0]});return{values:r,children:c}}},{key:"drawChildren",value:function(t,e,r,n){var a=this.sortChildren(r,n),o=a.values,i=a.children,u=!0,l=!1,s=void 0;try{for(var c,h=i[Symbol.iterator]();!(u=(c=h.next()).done);u=!0){var f=c.value;o.get(f)[1]===!0&&(d.resetCtx(t),f.draw(t,e,r,n))}}catch(t){l=!0,s=t}finally{try{!u&&h.return&&h.return()}finally{if(l)throw s}}}},{key:"draw",value:function(t,e,r,n){var a=this.transform.getMatrix(r,n),o=f.mat4.create();f.mat4.multiply(o,e,a),this.drawSelf(t,o,r,n),this.drawChildren(t,o,r,n)}},{key:"drawSelf",value:function(t,e,r,n){}},{key:"addChild",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=i.value;if(null!==l.parentNode&&l.parentNode!==this)throw new Error("Child node already has a parent");this.children.add(l),l.parentNode=this,l.emit("connected")}}catch(t){a=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}}},{key:"removeChild",value:function(){for(var t=[],e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=!0,o=!1,i=void 0;try{for(var u,l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;if(s.parentNode!==this)throw new Error("Not a child node of this object");s.emit("disconnected"),s.parentNode=null,t.push(this.children.delete(s))}}catch(t){o=!0,i=t}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}return 1===t.length?t[0]:t}},{key:"hasChild",value:function(t){return this.children.has(t)}},{key:"closest",value:function(t){return t(this)?this:this.parentNode?this.parentNode.closest(t):null}},{key:"addKeys",value:function(t){for(var e in t){var r=this,o=!0,i=!1,u=void 0;try{for(var s,c=e.split(".")[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var h=s.value;if(r=r[h],!r)break}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}if(r){var f=t[e],M=!1;if("object"===("undefined"==typeof f?"undefined":l(f)))for(var v in f){var p;if(v.match(/^[+-]?(?:\d+?(?:\.\d+?)?|\.\d+?)?$/)){var d=parseFloat(v),m=f[v];Array.isArray(m)||(m=[m]),r.addKey?(p=r).addKey.apply(p,[d].concat(a(m))):M||(console.warn(e+" has no addKey method"),M=!0)}else this.addKeys(n({},e+"."+v,f[v]))}else r.defaultValue=f}else console.warn("property not found: "+e)}}}]),e}(c)},function(t,e,r){"use strict";
//! stable.js 0.1.6, https://github.com/Two-Screen/stable
//! © 2017 Angry Bytes and contributors. MIT licensed.
!function(){function e(t,e){"function"!=typeof e&&(e=function(t,e){return String(t).localeCompare(e)});var r=t.length;if(r<=1)return t;for(var a=new Array(r),o=1;o<r;o*=2){n(t,e,o,a);var i=t;t=a,a=i}return t}var r=function(t,r){return e(t.slice(),r)};r.inplace=function(t,r){var a=e(t,r);return a!==t&&n(a,null,t.length,t),t};var n=function(t,e,r,n){var a,o,i,u,l,s=t.length,c=0,h=2*r;for(a=0;a<s;a+=h)for(o=a+r,i=o+r,o>s&&(o=s),i>s&&(i=s),u=a,l=o;;)if(u<o&&l<i)e(t[u],t[l])<=0?n[c++]=t[u++]:n[c++]=t[l++];else if(u<o)n[c++]=t[u++];else{if(!(l<i))break;n[c++]=t[l++]}};t.exports=r}()},function(t,e,r){var n,a,o;(function(t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,u){if("object"==r(e)&&"object"==r(t))t.exports=u();else{a=[],n=u,o="function"==typeof n?n.apply(e,a):n,!(void 0!==o&&(t.exports=o))}}(void 0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){e.glMatrix=r(1),e.mat2=r(2),e.mat2d=r(3),e.mat3=r(4),e.mat4=r(5),e.quat=r(6),e.vec2=r(9),e.vec3=r(7),e.vec4=r(8)},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=r},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,r,a){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=a,o},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=r*i,t):null},a.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=n*u+o*l,t[1]=a*u+i*l,t[2]=n*s+o*c,t[3]=a*s+i*c,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*u,t[1]=a*l+i*u,t[2]=n*-u+o*l,t[3]=a*-u+i*l,t},a.scale=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],l=r[1];return t[0]=n*u,t[1]=a*u,t[2]=o*l,t[3]=i*l,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,r,a,o,i){var u=new n.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=r,u[3]=a,u[4]=o,u[5]=i,u},a.set=function(t,e,r,n,a,o,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=r*o-n*a;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-a*l,t[3]=r*l,t[4]=(a*u-o*i)*l,t[5]=(n*i-r*u)*l,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1],h=r[2],f=r[3],M=r[4],v=r[5];return t[0]=n*s+o*c,t[1]=a*s+i*c,t[2]=n*h+o*f,t[3]=a*h+i*f,t[4]=n*M+o*v+u,t[5]=a*M+i*v+l,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*s,t[1]=a*c+i*s,t[2]=n*-s+o*c,t[3]=a*-s+i*c,t[4]=u,t[5]=l,t},a.scale=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1];return t[0]=n*s,t[1]=a*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},a.translate=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=n*s+o*c+u,t[5]=a*s+i*c+l,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=e[0],c=e[1],h=e[2],f=e[3],M=e[4],v=e[5];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-h)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-M)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-v)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,r,a,o,i,u,l,s){var c=new n.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=a,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},a.set=function(t,e,r,n,a,o,i,u,l,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=c*i-u*s,f=-c*o+u*l,M=s*o-i*l,v=r*h+n*f+a*M;return v?(v=1/v,t[0]=h*v,t[1]=(-c*n+a*s)*v,t[2]=(u*n-a*i)*v,t[3]=f*v,t[4]=(c*r-a*l)*v,t[5]=(-u*r+a*o)*v,t[6]=M*v,t[7]=(-s*r+n*l)*v,t[8]=(i*r-n*o)*v,t):null},a.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8];return t[0]=i*c-u*s,t[1]=a*s-n*c,t[2]=n*u-a*i,t[3]=u*l-o*c,t[4]=r*c-a*l,t[5]=a*o-r*u,t[6]=o*s-i*l,t[7]=n*l-r*s,t[8]=r*i-n*o,t},a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return e*(s*o-i*l)+r*(-s*a+i*u)+n*(l*a-o*u)},a.multiply=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=r[0],M=r[1],v=r[2],p=r[3],d=r[4],m=r[5],b=r[6],y=r[7],x=r[8];return t[0]=f*n+M*i+v*s,t[1]=f*a+M*u+v*c,t[2]=f*o+M*l+v*h,t[3]=p*n+d*i+m*s,t[4]=p*a+d*u+m*c,t[5]=p*o+d*l+m*h,t[6]=b*n+y*i+x*s,t[7]=b*a+y*u+x*c,t[8]=b*o+y*l+x*h,t},a.mul=a.multiply,a.translate=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=r[0],M=r[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=f*n+M*i+s,t[7]=f*a+M*u+c,t[8]=f*o+M*l+h,t},a.rotate=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=Math.sin(r),M=Math.cos(r);return t[0]=M*n+f*i,t[1]=M*a+f*u,t[2]=M*o+f*l,t[3]=M*i-f*n,t[4]=M*u-f*a,t[5]=M*l-f*o,t[6]=s,t[7]=c,t[8]=h,t},a.scale=function(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,u=n+n,l=a+a,s=r*i,c=n*i,h=n*u,f=a*i,M=a*u,v=a*l,p=o*i,d=o*u,m=o*l;return t[0]=1-h-v,t[3]=c-m,t[6]=f+d,t[1]=c+m,t[4]=1-s-v,t[7]=M-p,t[2]=f-d,t[5]=M+p,t[8]=1-s-h,t},a.normalFromMat4=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=e[9],f=e[10],M=e[11],v=e[12],p=e[13],d=e[14],m=e[15],b=r*u-n*i,y=r*l-a*i,x=r*s-o*i,S=n*l-a*u,g=n*s-o*u,w=a*s-o*l,I=c*p-h*v,D=c*d-f*v,F=c*m-M*v,O=h*d-f*p,k=h*m-M*p,_=f*m-M*d,E=b*_-y*k+x*O+S*F-g*D+w*I;return E?(E=1/E,t[0]=(u*_-l*k+s*O)*E,t[1]=(l*F-i*_-s*D)*E,t[2]=(i*k-u*F+s*I)*E,t[3]=(a*k-n*_-o*O)*E,t[4]=(r*_-a*F+o*D)*E,t[5]=(n*F-r*k-o*I)*E,t[6]=(p*w-d*g+m*S)*E,t[7]=(d*x-v*w-m*y)*E,t[8]=(v*g-p*x+m*b)*E,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],h=t[8],f=e[0],M=e[1],v=e[2],p=e[3],d=e[4],m=e[5],b=t[6],y=e[7],x=e[8];return Math.abs(r-f)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-M)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-v)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-d)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(l-m)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(s-b)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(h-x)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))},t.exports=a},function(t,e,r){var n=r(1),a={scalar:{},SIMD:{}};a.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,r,a,o,i,u,l,s,c,h,f,M,v,p,d){var m=new n.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=a,m[4]=o,m[5]=i,m[6]=u,m[7]=l,m[8]=s,m[9]=c,m[10]=h,m[11]=f,m[12]=M,m[13]=v,m[14]=p,m[15]=d,m},a.set=function(t,e,r,n,a,o,i,u,l,s,c,h,f,M,v,p,d){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=h,t[11]=f,t[12]=M,t[13]=v,t[14]=p,t[15]=d,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var r,n,a,o,i,u,l,s,c,h;return r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(a,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),h=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,h),t},a.transpose=n.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=e[9],f=e[10],M=e[11],v=e[12],p=e[13],d=e[14],m=e[15],b=r*u-n*i,y=r*l-a*i,x=r*s-o*i,S=n*l-a*u,g=n*s-o*u,w=a*s-o*l,I=c*p-h*v,D=c*d-f*v,F=c*m-M*v,O=h*d-f*p,k=h*m-M*p,_=f*m-M*d,E=b*_-y*k+x*O+S*F-g*D+w*I;return E?(E=1/E,t[0]=(u*_-l*k+s*O)*E,t[1]=(a*k-n*_-o*O)*E,t[2]=(p*w-d*g+m*S)*E,t[3]=(f*g-h*w-M*S)*E,t[4]=(l*F-i*_-s*D)*E,t[5]=(r*_-a*F+o*D)*E,t[6]=(d*x-v*w-m*y)*E,t[7]=(c*w-f*x+M*y)*E,t[8]=(i*k-u*F+s*I)*E,t[9]=(n*F-r*k-o*I)*E,t[10]=(v*g-p*x+m*b)*E,t[11]=(h*x-c*g-M*b)*E,t[12]=(u*D-i*O-l*I)*E,t[13]=(r*O-n*D+a*I)*E,t[14]=(p*y-v*S-d*b)*E,t[15]=(c*S-h*y+f*b)*E,t):null},a.SIMD.invert=function(t,e){var r,n,a,o,i,u,l,s,c,h,f=SIMD.Float32x4.load(e,0),M=SIMD.Float32x4.load(e,4),v=SIMD.Float32x4.load(e,8),p=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(f,M,0,1,4,5),n=SIMD.Float32x4.shuffle(v,p,0,1,4,5),r=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,M,2,3,6,7),o=SIMD.Float32x4.shuffle(v,p,2,3,6,7),a=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(n,i),l=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),c),h=SIMD.Float32x4.mul(r,u),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),i=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(i,i))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,c)),t):null},a.invert=n.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=e[9],f=e[10],M=e[11],v=e[12],p=e[13],d=e[14],m=e[15];return t[0]=u*(f*m-M*d)-h*(l*m-s*d)+p*(l*M-s*f),t[1]=-(n*(f*m-M*d)-h*(a*m-o*d)+p*(a*M-o*f)),t[2]=n*(l*m-s*d)-u*(a*m-o*d)+p*(a*s-o*l),t[3]=-(n*(l*M-s*f)-u*(a*M-o*f)+h*(a*s-o*l)),t[4]=-(i*(f*m-M*d)-c*(l*m-s*d)+v*(l*M-s*f)),t[5]=r*(f*m-M*d)-c*(a*m-o*d)+v*(a*M-o*f),t[6]=-(r*(l*m-s*d)-i*(a*m-o*d)+v*(a*s-o*l)),t[7]=r*(l*M-s*f)-i*(a*M-o*f)+c*(a*s-o*l),t[8]=i*(h*m-M*p)-c*(u*m-s*p)+v*(u*M-s*h),t[9]=-(r*(h*m-M*p)-c*(n*m-o*p)+v*(n*M-o*h)),t[10]=r*(u*m-s*p)-i*(n*m-o*p)+v*(n*s-o*u),t[11]=-(r*(u*M-s*h)-i*(n*M-o*h)+c*(n*s-o*u)),t[12]=-(i*(h*d-f*p)-c*(u*d-l*p)+v*(u*f-l*h)),t[13]=r*(h*d-f*p)-c*(n*d-a*p)+v*(n*f-a*h),t[14]=-(r*(u*d-l*p)-i*(n*d-a*p)+v*(n*l-a*u)),t[15]=r*(u*f-l*h)-i*(n*f-a*h)+c*(n*l-a*u),t},a.SIMD.adjoint=function(t,e){var r,n,a,o,i,u,l,s,c,h,f,M,v,r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(r,n,2,3,6,7),s=SIMD.Float32x4.shuffle(a,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.mul(u,c),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),v=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),v),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),M),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),v),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,v),t},a.adjoint=n.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],h=t[10],f=t[11],M=t[12],v=t[13],p=t[14],d=t[15],m=e*i-r*o,b=e*u-n*o,y=e*l-a*o,x=r*u-n*i,S=r*l-a*i,g=n*l-a*u,w=s*v-c*M,I=s*p-h*M,D=s*d-f*M,F=c*p-h*v,O=c*d-f*v,k=h*d-f*p;return m*k-b*O+y*F+x*D-S*I+g*w},a.SIMD.multiply=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var h=SIMD.Float32x4.load(r,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var M=SIMD.Float32x4.load(r,12),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,v),t},a.scalar.multiply=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=e[9],M=e[10],v=e[11],p=e[12],d=e[13],m=e[14],b=e[15],y=r[0],x=r[1],S=r[2],g=r[3];return t[0]=y*n+x*u+S*h+g*p,t[1]=y*a+x*l+S*f+g*d,t[2]=y*o+x*s+S*M+g*m,t[3]=y*i+x*c+S*v+g*b,y=r[4],x=r[5],S=r[6],g=r[7],t[4]=y*n+x*u+S*h+g*p,t[5]=y*a+x*l+S*f+g*d,t[6]=y*o+x*s+S*M+g*m,t[7]=y*i+x*c+S*v+g*b,y=r[8],x=r[9],S=r[10],g=r[11],t[8]=y*n+x*u+S*h+g*p,t[9]=y*a+x*l+S*f+g*d,t[10]=y*o+x*s+S*M+g*m,t[11]=y*i+x*c+S*v+g*b,y=r[12],x=r[13],S=r[14],g=r[15],t[12]=y*n+x*u+S*h+g*p,t[13]=y*a+x*l+S*f+g*d,t[14]=y*o+x*s+S*M+g*m,t[15]=y*i+x*c+S*v+g*b,t},a.multiply=n.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,r){var n,a,o,i,u,l,s,c,h,f,M,v,p=r[0],d=r[1],m=r[2];return e===t?(t[12]=e[0]*p+e[4]*d+e[8]*m+e[12],t[13]=e[1]*p+e[5]*d+e[9]*m+e[13],t[14]=e[2]*p+e[6]*d+e[10]*m+e[14],t[15]=e[3]*p+e[7]*d+e[11]*m+e[15]):(n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=e[9],M=e[10],v=e[11],t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=h,t[9]=f,t[10]=M,t[11]=v,t[12]=n*p+u*d+h*m+e[12],t[13]=a*p+l*d+f*m+e[13],t[14]=o*p+s*d+M*m+e[14],t[15]=i*p+c*d+v*m+e[15]),t},a.SIMD.translate=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},a.translate=n.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,r){var n=r[0],a=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,r){var n,a,o,i=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=n.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,r,a){var o,i,u,l,s,c,h,f,M,v,p,d,m,b,y,x,S,g,w,I,D,F,O,k,_=a[0],E=a[1],A=a[2],P=Math.sqrt(_*_+E*E+A*A);return Math.abs(P)<n.EPSILON?null:(P=1/P,_*=P,E*=P,A*=P,o=Math.sin(r),i=Math.cos(r),u=1-i,l=e[0],s=e[1],c=e[2],h=e[3],f=e[4],M=e[5],v=e[6],p=e[7],d=e[8],m=e[9],b=e[10],y=e[11],x=_*_*u+i,S=E*_*u+A*o,g=A*_*u-E*o,w=_*E*u-A*o,I=E*E*u+i,D=A*E*u+_*o,F=_*A*u+E*o,O=E*A*u-_*o,k=A*A*u+i,t[0]=l*x+f*S+d*g,t[1]=s*x+M*S+m*g,t[2]=c*x+v*S+b*g,t[3]=h*x+p*S+y*g,t[4]=l*w+f*I+d*D,t[5]=s*w+M*I+m*D,t[6]=c*w+v*I+b*D,t[7]=h*w+p*I+y*D,t[8]=l*F+f*O+d*k,t[9]=s*F+M*O+m*k,t[10]=c*F+v*O+b*k,t[11]=h*F+p*O+y*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[4],i=e[5],u=e[6],l=e[7],s=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+s*n,t[5]=i*a+c*n,t[6]=u*a+h*n,t[7]=l*a+f*n,t[8]=s*a-o*n,t[9]=c*a-i*n,t[10]=h*a-u*n,t[11]=f*a-l*n,t},a.SIMD.rotateX=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,n))),t},a.rotateX=n.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],u=e[2],l=e[3],s=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-s*n,t[1]=i*a-c*n,t[2]=u*a-h*n,t[3]=l*a-f*n,t[8]=o*n+s*a,t[9]=i*n+c*a,t[10]=u*n+h*a,t[11]=l*n+f*a,t},a.SIMD.rotateY=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),t},a.rotateY=n.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],u=e[2],l=e[3],s=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+s*n,t[1]=i*a+c*n,t[2]=u*a+h*n,t[3]=l*a+f*n,t[4]=s*a-o*n,t[5]=c*a-i*n,t[6]=h*a-u*n,t[7]=f*a-l*n,t},a.SIMD.rotateZ=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,n))),t},a.rotateZ=n.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,r){var a,o,i,u=r[0],l=r[1],s=r[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<n.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,a=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*a,t[2]=s*u*i-l*a,t[3]=0,t[4]=u*l*i-s*a,t[5]=l*l*i+o,t[6]=s*l*i+u*a,t[7]=0,t[8]=u*s*i+l*a,t[9]=l*s*i-u*a,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=n+n,l=a+a,s=o+o,c=n*u,h=n*l,f=n*s,M=a*l,v=a*s,p=o*s,d=i*u,m=i*l,b=i*s;return t[0]=1-(M+p),t[1]=h+b,t[2]=f-m,t[3]=0,t[4]=h-b,t[5]=1-(c+p),t[6]=v+d,t[7]=0,t[8]=f+m,t[9]=v-d,t[10]=1-(c+M),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,
t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},a.fromRotationTranslationScale=function(t,e,r,n){var a=e[0],o=e[1],i=e[2],u=e[3],l=a+a,s=o+o,c=i+i,h=a*l,f=a*s,M=a*c,v=o*s,p=o*c,d=i*c,m=u*l,b=u*s,y=u*c,x=n[0],S=n[1],g=n[2];return t[0]=(1-(v+d))*x,t[1]=(f+y)*x,t[2]=(M-b)*x,t[3]=0,t[4]=(f-y)*S,t[5]=(1-(h+d))*S,t[6]=(p+m)*S,t[7]=0,t[8]=(M+b)*g,t[9]=(p-m)*g,t[10]=(1-(h+v))*g,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){var o=e[0],i=e[1],u=e[2],l=e[3],s=o+o,c=i+i,h=u+u,f=o*s,M=o*c,v=o*h,p=i*c,d=i*h,m=u*h,b=l*s,y=l*c,x=l*h,S=n[0],g=n[1],w=n[2],I=a[0],D=a[1],F=a[2];return t[0]=(1-(p+m))*S,t[1]=(M+x)*S,t[2]=(v-y)*S,t[3]=0,t[4]=(M-x)*g,t[5]=(1-(f+m))*g,t[6]=(d+b)*g,t[7]=0,t[8]=(v+y)*w,t[9]=(d-b)*w,t[10]=(1-(f+p))*w,t[11]=0,t[12]=r[0]+I-(t[0]*I+t[4]*D+t[8]*F),t[13]=r[1]+D-(t[1]*I+t[5]*D+t[9]*F),t[14]=r[2]+F-(t[2]*I+t[6]*D+t[10]*F),t[15]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,u=n+n,l=a+a,s=r*i,c=n*i,h=n*u,f=a*i,M=a*u,v=a*l,p=o*i,d=o*u,m=o*l;return t[0]=1-h-v,t[1]=c+m,t[2]=f-d,t[3]=0,t[4]=c-m,t[5]=1-s-v,t[6]=M+p,t[7]=0,t[8]=f+d,t[9]=M-p,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,r,n,a,o,i){var u=1/(r-e),l=1/(a-n),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(a+n)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},a.perspective=function(t,e,r,n,a){var o=1/Math.tan(e/2),i=1/(n-a);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*i,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(a+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-u)*l*.5),t[9]=(a-o)*s*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},a.ortho=function(t,e,r,n,a,o,i){var u=1/(e-r),l=1/(n-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+r)*u,t[13]=(a+n)*l,t[14]=(i+o)*s,t[15]=1,t},a.lookAt=function(t,e,r,o){var i,u,l,s,c,h,f,M,v,p,d=e[0],m=e[1],b=e[2],y=o[0],x=o[1],S=o[2],g=r[0],w=r[1],I=r[2];return Math.abs(d-g)<n.EPSILON&&Math.abs(m-w)<n.EPSILON&&Math.abs(b-I)<n.EPSILON?a.identity(t):(f=d-g,M=m-w,v=b-I,p=1/Math.sqrt(f*f+M*M+v*v),f*=p,M*=p,v*=p,i=x*v-S*M,u=S*f-y*v,l=y*M-x*f,p=Math.sqrt(i*i+u*u+l*l),p?(p=1/p,i*=p,u*=p,l*=p):(i=0,u=0,l=0),s=M*l-v*u,c=v*i-f*l,h=f*u-M*i,p=Math.sqrt(s*s+c*c+h*h),p?(p=1/p,s*=p,c*=p,h*=p):(s=0,c=0,h=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=u,t[5]=c,t[6]=M,t[7]=0,t[8]=l,t[9]=h,t[10]=v,t[11]=0,t[12]=-(i*d+u*m+l*b),t[13]=-(s*d+c*m+h*b),t[14]=-(f*d+M*m+v*b),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],h=t[8],f=t[9],M=t[10],v=t[11],p=t[12],d=t[13],m=t[14],b=t[15],y=e[0],x=e[1],S=e[2],g=e[3],w=e[4],I=e[5],D=e[6],F=e[7],O=e[8],k=e[9],_=e[10],E=e[11],A=e[12],P=e[13],z=e[14],T=e[15];return Math.abs(r-y)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-x)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(i-g)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(u-w)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(l-I)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(s-D)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(c-F)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(h-O)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(f-k)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(M-_)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(_))&&Math.abs(v-E)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(E))&&Math.abs(p-A)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-P)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(m-z)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(b-T)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(T))},t.exports=a},function(t,e,r){var n=r(1),a=r(4),o=r(7),i=r(8),u={};u.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,a,i){var l=o.dot(a,i);return-.999999>l?(o.cross(t,e,a),o.length(t)<1e-6&&o.cross(t,r,a),o.normalize(t,t),u.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,a,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,u.normalize(n,n))}}(),u.setAxes=function(){var t=a.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},u.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},u.add=i.add,u.multiply=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=n*c+i*u+a*s-o*l,t[1]=a*c+i*l+o*u-n*s,t[2]=o*c+i*s+n*l-a*u,t[3]=i*c-n*u-a*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,r){r*=.5;var n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*u,t[1]=a*l+o*u,t[2]=o*l-a*u,t[3]=i*l-n*u,t},u.rotateY=function(t,e,r){r*=.5;var n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l-o*u,t[1]=a*l+i*u,t[2]=o*l+n*u,t[3]=i*l-a*u,t},u.rotateZ=function(t,e,r){r*=.5;var n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*u,t[1]=a*l-n*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,r,n){var a,o,i,u,l,s=e[0],c=e[1],h=e[2],f=e[3],M=r[0],v=r[1],p=r[2],d=r[3];return o=s*M+c*v+h*p+f*d,0>o&&(o=-o,M=-M,v=-v,p=-p,d=-d),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-n)*a)/i,l=Math.sin(n*a)/i):(u=1-n,l=n),t[0]=u*s+l*M,t[1]=u*c+l*v,t[2]=u*h+l*p,t[3]=u*f+l*d,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(r,n,a,o,i,l){return u.slerp(t,n,i,l),u.slerp(e,a,o,l),u.slerp(r,t,e,2*l*(1-l)),r}}(),u.invert=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-a*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,r){var a=new n.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=r,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],u=r[1],l=r[2];return t[0]=a*l-o*u,t[1]=o*i-n*l,t[2]=n*u-a*i,t},a.lerp=function(t,e,r,n){var a=e[0],o=e[1],i=e[2];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t},a.hermite=function(t,e,r,n,a,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+r[0]*l+n[0]*s+a[0]*c,t[1]=e[1]*u+r[1]*l+n[1]*s+a[1]*c,t[2]=e[2]*u+r[2]*l+n[2]*s+a[2]*c,t},a.bezier=function(t,e,r,n,a,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,h=3*l*i,f=l*o;return t[0]=e[0]*s+r[0]*c+n[0]*h+a[0]*f,t[1]=e[1]*s+r[1]*c+n[1]*h+a[1]*f,t[2]=e[2]*s+r[2]*c+n[2]*h+a[2]*f,t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,a=2*n.RANDOM()-1,o=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=a*e,t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[3]*n+r[7]*a+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/i,t[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/i,t[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/i,t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1],o=e[2];return t[0]=n*r[0]+a*r[3]+o*r[6],t[1]=n*r[1]+a*r[4]+o*r[7],t[2]=n*r[2]+a*r[5]+o*r[8],t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*n+u*o-l*a,h=s*a+l*n-i*o,f=s*o+i*a-u*n,M=-i*n-u*a-l*o;return t[0]=c*s+M*-i+h*-l-f*-u,t[1]=h*s+M*-u+f*-i-c*-l,t[2]=f*s+M*-l+c*-u-h*-i,t},a.rotateX=function(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},a.rotateY=function(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},a.rotateZ=function(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,o,i){var u,l;for(r||(r=3),n||(n=0),l=a?Math.min(a*r+n,e.length):e.length,u=n;l>u;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),a.angle=function(t,e){var r=a.fromValues(t[0],t[1],t[2]),n=a.fromValues(e[0],e[1],e[2]);a.normalize(r,r),a.normalize(n,n);var o=a.dot(r,n);return o>1?0:Math.acos(o)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=e[0],u=e[1],l=e[2];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,r,a){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=a,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=n*i,t[2]=a*i,t[3]=o*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,r,n){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t[3]=u+n*(r[3]-u),t},a.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*i,t[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*i,t[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*i,t[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*i,t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*n+u*o-l*a,h=s*a+l*n-i*o,f=s*o+i*a-u*n,M=-i*n-u*a-l*o;return t[0]=c*s+M*-i+h*-l-f*-u,t[1]=h*s+M*-u+f*-i-c*-l,t[2]=f*s+M*-l+c*-u-h*-i,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,o,i){var u,l;for(r||(r=4),n||(n=0),l=a?Math.min(a*r+n,e.length):e.length,u=n;l>u;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,r){return t[0]=e,t[1]=r,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},a.lerp=function(t,e,r,n){var a=e[0],o=e[1];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},a.transformMat2=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t},a.transformMat2d=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,o,i){var u,l;for(r||(r=2),n||(n=0),l=a?Math.min(a*r+n,e.length):e.length,u=n;l>u;u+=r)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var r=t[0],a=t[1],o=e[0],i=e[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-i)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))},t.exports=a}])})}).call(e,r(22)(t))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(21),i=r(17);t.exports=function(){function t(){n(this,t),this.translateX=new i(0),this.translateY=new i(0),this.translateZ=new i(0),this.rotateX=new i(0),this.rotateY=new i(0),this.rotateZ=new i(0),this.skewX=new i(0),this.skewY=new i(0),this.skewZX=new i(0),this.skewZY=new i(0),this.skewXZ=new i(0),this.skewYZ=new i(0),this.scaleX=new i(1),this.scaleY=new i(1),this.scaleZ=new i(1)}return a(t,[{key:"getMatrix",value:function(t,e){var r=o.mat4.create(),n=this.translateX.getValue(t,e),a=this.translateY.getValue(t,e),i=this.translateZ.getValue(t,e),u=this.rotateX.getValue(t,e),l=this.rotateY.getValue(t,e),s=this.rotateZ.getValue(t,e),c=this.skewX.getValue(t,e),h=this.skewY.getValue(t,e),f=this.skewZX.getValue(t,e),M=this.skewZY.getValue(t,e),v=this.skewXZ.getValue(t,e),p=this.skewYZ.getValue(t,e),d=this.scaleX.getValue(t,e),m=this.scaleY.getValue(t,e),b=this.scaleZ.getValue(t,e);o.mat4.translate(r,r,[n,a,i]),o.mat4.rotate(r,r,u,[1,0,0]),o.mat4.rotate(r,r,l,[0,1,0]),o.mat4.rotate(r,r,s,[0,0,1]),o.mat4.scale(r,r,[d,m,b]);var y=o.mat4.fromValues(1,h,f,0,c,1,M,0,v,p,1,0,0,0,0,1);return o.mat4.multiply(r,r,y),r}},{key:"skewXY",get:function(){return this.skewX},set:function(t){this.skewX=t}},{key:"skewYX",get:function(){return this.skewY},set:function(t){this.skewY=t}}]),t}()},function(t,e){"use strict";t.exports={setTransformMatrix:function(t,e){t.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])},resetCtx:function(t){t.direction="inherit",t.fillStyle="#000",t.filter="none",t.font="10px sans-serif",t.globalAlpha=1,t.globalCompositeOperation="source-over",t.imageSmoothingEnabled=!0,t.lineCap="butt",t.lineDashOffset=0,t.lineJoin="miter",t.miterLimit=10,t.shadowBlur=0,t.shadowColor="rgba(0, 0, 0, 0)",t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeStyle="#000",t.textAlign="start",t.textBaseline="alphabetic",t.setLineDash([])}}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(19),l=r(21),s=l.mat4.create();t.exports=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.currentTime=0,r.playbackRate=1,r.paused=!0,r.duration=null,r.loop=!1,r.timeoutFunction="undefined"!=typeof window?function(t){return window.requestAnimationFrame(t)}:function(t){return setTimeout(t,16.7)},r.lastLoopTime=0,r.ctx=t||null,r.running=!1,r.markers=new Map,r}return o(e,t),i(e,[{key:"drawLoop",value:function(){var t=this;this.running&&this.timeoutFunction(function(){return t.drawLoop()});var e=Date.now(),r=(e-this.lastLoopTime)/1e3;if(this.lastLoopTime=e,!this.paused){var n=this.currentTime;this.currentTime+=r*this.playbackRate;var a=this.currentTime>n?n:this.currentTime,o=this.currentTime<n?n:this.currentTime,i=null,u=!0,l=!1,c=void 0;try{for(var h,f=this.markers.entries()[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var M=h.value;if(a<M[0]&&M[0]<o){i=M;break}}}catch(t){l=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}if(i){var v=i[1];0===v&&(this.currentTime=i[0],this.pause())}this.emit("timeupdate"),null!==this.duration&&this.currentTime>=this.duration&&(this.loop?this.currentTime=0:(this.currentTime=this.duration,this.pause(),this.emit("end"))),this.playbackRate<0&&this.currentTime<=0&&(this.loop&&null!==this.duration?this.currentTime=this.duration:(this.currentTime=0,this.pause(),this.emit("end")))}this.ctx&&(this.draw(this.ctx,s,this.currentTime,r),this.emit("loopend"))}},{key:"drawCurrent",value:function(t){this.draw(this.ctx,s,this.currentTime,t||0)}},{key:"play",value:function(){return!!this.paused&&(this.paused=!1,this.emit("play"),!0)}},{key:"pause",value:function(){return!this.paused&&(this.paused=!0,this.emit("pause"),!0)}},{key:"run",value:function(){return!this.running&&(this.running=!0,this.lastLoopTime=Date.now(),this.drawLoop(),this.emit("run"),!0)}},{key:"stop",value:function(){return!!this.running&&(this.running=!1,this.emit("stop"),!0)}}]),e}(u)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(21),l=r(19),s=r(24);t.exports=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.width=960,t.height=540,t.canvasWidth=960,t.canvasHeight=540,t.canvasScale=1,t.contentSize="contain",t.backgroundColor="",t.marginColor="",t}return o(e,t),i(e,[{key:"getContentPos",value:function(){var t=1;if("contain"===this.contentSize)t=Math.min(this.canvasWidth/this.width,this.canvasHeight/this.height);else{if("cover"!==this.contentSize)return{x:0,y:0,scale:0};t=Math.max(this.canvasWidth/this.width,this.canvasHeight/this.height)}var e=(this.canvasWidth-this.width*t)/2,r=(this.canvasHeight-this.height*t)/2;return{x:e,y:r,scale:t}}},{key:"draw",value:function(t,e,r,n){var a=this.transform.getMatrix(r,n),o=u.mat4.create();u.mat4.multiply(o,e,a);var i=this.getContentPos(),l=this.canvasScale;u.mat4.translate(o,o,[i.x*l,i.y*l,0]),u.mat4.scale(o,o,[i.scale*l,i.scale*l,1]),this.drawSelf(t,o,r,n),t.save(),this.drawChildren(t,o,r,n),t.restore(),this.drawMargin(t,o,r,n)}},{key:"drawSelf",value:function(t,e,r,n){t.globalAlpha=1;var a=this.canvasScale;s.resetCtx(t),t.resetTransform(),t.clearRect(0,0,this.canvasWidth*a,this.canvasHeight*a);var o=this.getContentPos();t.clearRect(o.x*a,o.y*a,o.scale*this.width*a,o.scale*this.height*a),this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fillRect(o.x*a,o.y*a,o.scale*this.width*a,o.scale*this.height*a))}},{key:"drawMargin",value:function(t,e,r,n){t.globalAlpha=1;var a=this.canvasScale;s.resetCtx(t),t.resetTransform();var o=this.getContentPos();t.fillStyle=this.marginColor;var i=!!this.marginColor;o.x>0&&(t.clearRect(0,0,o.x*a,this.canvasHeight*a),i&&t.fillRect(0,0,o.x*a,this.canvasHeight*a),t.clearRect((this.canvasWidth-o.x)*a,0,o.x*a,this.canvasHeight*a),i&&t.fillRect((this.canvasWidth-o.x)*a,0,o.x*a,this.canvasHeight*a)),o.y>0&&(t.clearRect(o.x*a,0,(this.canvasWidth-2*o.x)*a,o.y*a),i&&t.fillRect(o.x*a,0,(this.canvasWidth-2*o.x)*a,o.y*a),t.clearRect(o.x*a,(this.canvasHeight-o.y)*a,(this.canvasWidth-2*o.x)*a,o.y*a),i&&t.clearRect(o.x*a,(this.canvasHeight-o.y)*a,(this.canvasWidth-2*o.x)*a,o.y*a))}}]),e}(l)},function(t,e,r){"use strict";t.exports={ClippedText:r(28),ClippedContainer:r(29),Subcontext:r(30)}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(2);t.exports=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.text=new u.AnimatedString(""),t.clip=new u.AnimatedNumber(0),t.skew=new u.AnimatedNumber(0),t.family=new u.AnimatedString("sans-serif"),t.weight=new u.AnimatedNumber(400),t.size=new u.AnimatedNumber(16),t.style=new u.AnimatedString("normal"),t.color=new u.AnimatedColor("#000"),t.align=new u.AnimatedString("center"),t.baseline=new u.AnimatedString("middle"),t.compensation=new u.AnimatedNumber(0),t}return o(e,t),i(e,[{key:"drawSelf",value:function(t,e,r,n){u.Utils.setTransformMatrix(t,e);var a=this.opacity.getValue(r,n),o=this.text.getValue(r,n),i=this.clip.getValue(r,n),l=this.family.getValue(r,n),s=100*Math.round(this.weight.getValue(r,n)/100),c=+this.size.getValue(r,n).toFixed(3),h=this.style.getValue(r,n),f=this.color.getValue(r,n),M=this.align.getValue(r,n),v=this.baseline.getValue(r,n),p=Math.tan(this.skew.getValue(r,n))*c*1.3,d=this.compensation.getValue(r,n),m=s+" "+h+" "+c+"px "+l;t.font=m;var b=t.measureText(o).width,y=-b/2+(b+p)*i,x=b/2+(b+p)*i,S=-c/2*1.3,g=c/2*1.3;"left"===M?t.translate(b/2,0):"right"===M&&t.translate(-b/2,0),
"top"===v?t.translate(0,c/2):"bottom"===v&&t.translate(0,-c/2),t.translate(-b/2*i*d,0),t.save(),0!==i&&(t.beginPath(),t.moveTo(y,S),t.lineTo(x+p,S),t.lineTo(x,g),t.lineTo(y-p,g),t.closePath(),t.clip()),t.globalAlpha=a,t.textAlign="center",t.textBaseline="middle",t.fillStyle=f,t.fillText(o,0,0),t.restore()}}]),e}(u.Object)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(2);t.exports=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.clip=function(){},t}return o(e,t),i(e,[{key:"drawChildren",value:function(t,e,r,n){var a=this.sortChildren(r,n),o=a.values,i=a.children;t.save(),this.clip(t,e,r,n);var l=!0,s=!1,c=void 0;try{for(var h,f=i[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var M=h.value;o.get(M)[1]===!0&&(u.Utils.resetCtx(t),M.draw(t,e,r,n))}}catch(t){s=!0,c=t}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}t.restore()}},{key:"drawSelf",value:function(){}}]),e}(u.Object)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(2);t.exports=function(t){function e(t,r,o,i){n(this,e);var l=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.width=t,l.height=r,l.originX=new u.AnimatedNumber(0),l.originY=new u.AnimatedNumber(0),l.subTransform=null,l.inheritScale=!0,l.scaleX=1,l.scaleY=1,l.alwaysRedraw=!0,l.__lastDrawTime=null,l.anchorX=new u.AnimatedNumber(0),l.anchorY=new u.AnimatedNumber(0),l.canvas=o||document.createElement("canvas"),l.subctx=l.canvas.getContext("2d"),l.buffer=i||new window.Image,l.filter=function(){},l.updateCanvas(),l}return o(e,t),i(e,[{key:"updateCanvas",value:function(){var t=this.realWidth,e=this.realHeight;this.canvas.width===t&&this.canvas.height===e||(this.canvas.width=t,this.canvas.height=e),this.buffer.width!==t&&this.buffer.height!==e&&(this.buffer.width=t,this.buffer.height=e)}},{key:"drawSubcontext",value:function(t,e,r,n){var a=this.sortChildren(r,n),o=a.values,i=a.children,l=this.inheritScale?this.scaleX=e[0]:1,s=this.inheritScale?this.scaleY=e[5]:1,c=this.originX.getValue(r,n),h=this.originY.getValue(r,n),f=[l,0,0,0,0,s,0,0,0,0,1,0,c,h,0,1];this.subTransform&&(f=this.subTransform.getMatrix()),this.updateCanvas(),this.subctx.setTransform(1,0,0,1,0,0),this.subctx.clearRect(0,0,this.canvas.width,this.canvas.height);var M=!0,v=!1,p=void 0;try{for(var d,m=i[Symbol.iterator]();!(M=(d=m.next()).done);M=!0){var b=d.value;o.get(b)[1]===!0&&(u.Utils.resetCtx(this.subctx),b.draw(this.subctx,f,r,n))}}catch(t){v=!0,p=t}finally{try{!M&&m.return&&m.return()}finally{if(v)throw p}}this.filter(this.subctx,f,r,n),this.buffer.src=this.canvas.toDataURL()}},{key:"drawChildren",value:function(t,e,r,n){(this.alwaysRedraw||this.__lastDrawTime!==r)&&(this.drawSubcontext(t,e,r,n),this.__lastDrawTime=r)}},{key:"drawSelf",value:function(t,e,r,n){u.Utils.setTransformMatrix(t,e),t.translate(-this.anchorX.getValue(r,n),-this.anchorY.getValue(r,n)),t.scale(1/this.scaleX,1/this.scaleY),t.drawImage(this.buffer,0,0)}},{key:"realWidth",get:function(){return this.width*this.scaleX},set:function(t){this.width=t/this.scaleX}},{key:"realHeight",get:function(){return this.height*this.scaleY},set:function(t){this.height=t/this.scaleY}}]),e}(u.Object)}]);
